/*! Coil Web Monetization for WordPress v1.8.0 Tuesday 13th April 2021 12:44:00 PM GMT+0200 */
!function(a){if("undefined"==typeof coil_params||!function(){var e;try{e=document.querySelector(coil_params.content_container)}catch(e){return console.log("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.log("An error occured when attempting to retrieve the page. Container not found."),!1}())return;var o=coil_params.content_container,e=coil_params.fully_gated,t=coil_params.unable_to_verify,n=coil_params.voluntary_donation,i=coil_params.loading_content,s=coil_params.partial_gating,r=coil_params.post_excerpt,c=coil_params.admin_missing_id_notice,d=coil_params.learn_more_button_text,l=coil_params.learn_more_button_link,m=coil_params.site_logo,u=Boolean(coil_params.show_donation_bar),p=wp.template("subscriber-only-message"),g=wp.template("split-content-message"),b=wp.template("banner-message"),f=a("p.monetize-msg");function y(e,o){var t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function h(e){var o=document.createElement("div");o.classList.add("entry-content","coil-message-container");var t={headerLogo:m,title:"This content is for Paying Viewers Only",content:e,button:{text:d,href:l}};return a(o).append(p(t)),o}function w(e){var o=document.createElement("div");o.classList.add("coil-banner-message-container");var t={content:e,button:{text:d,href:l}};return a(o).append(b(t)),o}function v(e){return g(e)}function z(){var e=document.querySelector(o);e&&(e.style.display="block")}function _(){if(""!==r){var e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=r,e}}function C(){return jQuery("p.coil-post-excerpt").remove()}function L(){return document.body.classList.contains("coil-no-gating")}function S(){return document.body.classList.contains("coil-gate-all")}function x(){return document.body.classList.contains("coil-gate-tagged-blocks")}function M(){return".content-area .entry-content"===o}function P(){return!!document.body.classList.contains("coil-show-excerpt")}function q(){0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),S()?P()&&_()?(document.body.classList.add("show-excerpt-message"),a(o).before(h(t)),a(o).prepend(_())):(document.body.classList.add("show-fw-message"),a(o).before(h(t))):x()?(a(".coil-show-monetize-users").prepend(v(t)),a(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),z(),u&&!k("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg"))):(document.body.classList.add("show-fw-message"),document.querySelector(o).before(h(t))))}function E(e){a("#js-coil-banner-dismiss").on("click",function(){k(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),a(this).parent().parent().remove())})}function k(e){var o=Cookies.get(e);return void 0!==o&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===o}function T(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?a(o).before(y(c,"admin-message")):a("body").removeClass("coil-missing-id"),L()||M()||(z(),a(o+"*.coil-hide-monetize-users").css("display","none"),a(o+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):L()?u&&document.body.classList.contains("monetization-not-initialized")&&!k("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")):(S()?P()?document.querySelector(o).before(y(i,"")):a("p.coil-post-excerpt").after(y(i,"")):document.querySelector(o).before(y(i,"")),setTimeout(function(){C(),f.html(i)},2e3),setTimeout(function(){q()},5e3))}function j(){(S()||x())&&(C(),function(){var e=document.querySelector(o);e&&(e.style.display="none")}(),document.querySelector(o).before(y(i,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(a("p.monetize-msg").text()===i?q():L()&&u&&!k("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")))},5e3)}function A(e){monetizationStartEventOccurred=!0,L()||M()||(z(),document.body.classList.remove("show-fw-message"),P()&&C()),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),f.remove(),P()||a("div.coil-post-excerpt").remove(),u&&a("div").remove(".coil-banner-message-container"),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),C(),z()),jQuery(window).trigger("resize")}function O(e){var o=e.detail.paymentPointer,t=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,o,t,n,i,s])}function Q(){if(document.body.classList.contains("monetization-not-initialized"))if(L()||M()||a(o).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":T();break;case"started":document.querySelector(o).before(y(i,""));break;case"stopped":j()}document.monetization.addEventListener("monetizationstart",A),document.monetization.addEventListener("monetizationprogress",O)}else window.Cypress&&window.Cypress.monetized||(a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),S()?(a(o).before(h(e)),P()&&_()?(document.body.classList.add("show-excerpt-message"),a(o).prepend(_())):document.body.classList.add("show-fw-message")):x()?(a(".coil-show-monetize-users").prepend(v(s)),a(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),z(),u&&!k("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg"))):L()&&u&&!k("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")),a("body").trigger("coil-extension-not-found"))}a(document).ready(function(){document.addEventListener("coilstart",Q),Q()})}(jQuery);