/*! Coil Web Monetization for WordPress v1.8.0 Friday 16th April 2021 10:15:49 AM GMT+0200 */
!function(u){if("undefined"!=typeof coil_params&&function(){let e;try{e=document.querySelector(coil_params.content_container)}catch(e){return console.log("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.log("An error occured when attempting to retrieve the page. Container not found."),!1}()){let t=coil_params.content_container,e=coil_params.fully_gated,o=coil_params.unable_to_verify,n=coil_params.voluntary_donation,i=coil_params.loading_content,s=coil_params.partial_gating,c=coil_params.post_excerpt,a=coil_params.admin_missing_id_notice,r=coil_params.learn_more_button_text,d=coil_params.learn_more_button_link,l=coil_params.site_logo,m=Boolean(coil_params.show_donation_bar);const j=wp.template("subscriber-only-message"),A=wp.template("split-content-message"),O=wp.template("banner-message"),Q=u("p.monetize-msg");function p(e,t){const o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function g(e){const t=document.createElement("div");t.classList.add("entry-content","coil-message-container");e={headerLogo:l,title:"This content is for Paying Viewers Only",content:e,button:{text:r,href:d}};return u(t).append(j(e)),t}function b(e){const t=document.createElement("div");t.classList.add("coil-banner-message-container");e={content:e,button:{text:r,href:d}};return u(t).append(O(e)),t}function f(e){return A(e)}function y(){const e=document.querySelector(t);e&&(e.style.display="block")}function h(){if(""!==c){const e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=c,e}}function w(){return jQuery("p.coil-post-excerpt").remove()}function z(){return u("div").remove(".coil-banner-message-container")}function _(){return document.body.classList.contains("coil-no-gating")}function v(){return document.body.classList.contains("coil-gate-all")}function C(){return document.body.classList.contains("coil-gate-tagged-blocks")}function L(){return".content-area .entry-content"===t}function S(){0<u("p.monetize-msg").length&&(u("p.monetize-msg").remove(),v()?h()?(document.body.classList.add("show-excerpt-message"),u(t).before(g(o)),u(t).prepend(h())):(document.body.classList.add("show-fw-message"),u(t).before(g(o))):C()?(u(".coil-show-monetize-users").prepend(f(o)),u(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),y(),m&&!P("ShowCoilPublicMsg")&&(u("body").append(b(n)),M("ShowCoilPublicMsg"))):(document.body.classList.add("show-fw-message"),document.querySelector(t).before(g(o))))}function M(e){u("#js-coil-banner-dismiss").on("click",function(){P(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),u(this).parent().parent().remove())})}function P(e){var t=Cookies.get(e);return void 0!==t&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===t}function x(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?u(t).before(p(a,"admin-message")):u("body").removeClass("coil-missing-id"),_()||L()||(y(),u(t+"*.coil-hide-monetize-users").css("display","none"),u(t+"*.coil-show-monetize-users").css("display","none")),u("body").trigger("coil-missing-id")):_()?m&&document.body.classList.contains("monetization-not-initialized")&&!P("ShowCoilPublicMsg")&&(u("body").append(b(n)),M("ShowCoilPublicMsg")):(document.querySelector(t).before(p(i,"")),setTimeout(function(){w(),Q.html(i)},2e3),setTimeout(function(){S()},5e3))}function E(){(v()||C())&&(w(),function(){const e=document.querySelector(t);e&&(e.style.display="none")}(),document.querySelector(t).before(p(i,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(u("p.monetize-msg").text()===i?S():_()&&m&&!P("ShowCoilPublicMsg")&&(u("body").append(b(n)),M("ShowCoilPublicMsg")))},5e3)}function k(e){monetizationStartEventOccurred=!0,_()||L()||(y(),document.body.classList.remove("show-fw-message"),w()),u("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),Q.remove(),m&&z(),m&&z(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),u("body").trigger("coil-monetization-initialized",[e]),0<u("p.monetize-msg").length&&(u("p.monetize-msg").remove(),w(),y()),jQuery(window).trigger("resize")}function q(e){var t=e.detail.paymentPointer,o=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;u("body").trigger("coil-monetization-progress",[e,t,o,n,i,s])}function T(){if(document.body.classList.contains("monetization-not-initialized"))if(_()||L()||u(t).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":x();break;case"started":document.querySelector(t).before(p(i,""));break;case"stopped":E()}document.monetization.addEventListener("monetizationstart",k),document.monetization.addEventListener("monetizationprogress",q)}else window.Cypress&&window.Cypress.monetized||(u("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),v()?(u(t).before(g(e)),h()?(document.body.classList.add("show-excerpt-message"),u(t).prepend(h())):document.body.classList.add("show-fw-message")):C()?(u(".coil-show-monetize-users").prepend(f(s)),u(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),y(),m&&!P("ShowCoilPublicMsg")&&(u("body").append(b(n)),M("ShowCoilPublicMsg"))):_()&&m&&!P("ShowCoilPublicMsg")&&(u("body").append(b(n)),M("ShowCoilPublicMsg")),u("body").trigger("coil-extension-not-found"))}u(document).ready(function(){document.addEventListener("coilstart",T),T()})}}(jQuery);