/*! Coil Web Monetization for WordPress v1.7.0 Thursday 8th April 2021 14:28:41 PM GMT+0200 */
!function(c){if("undefined"!=typeof coil_params&&function(){let e;try{e=document.querySelector(coil_params.content_container)}catch(e){return console.error("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.error("An error occured when attempting to retrieve the page. Container not found."),!1}()){const _=coil_params.content_container,v=coil_params.browser_extension_missing,C=coil_params.unable_to_verify,L=coil_params.voluntary_donation,S=coil_params.loading_content,x=coil_params.partial_gating,M=coil_params.post_excerpt,P=coil_params.admin_missing_id_notice,E=coil_params.learn_more_button_text,k=coil_params.learn_more_button_link,q=coil_params.site_logo,T=Boolean(coil_params.show_donation_bar),A=wp.template("subscriber-only-message"),j=wp.template("split-content-message"),H=wp.template("banner-message"),I=c("p.monetize-msg");function e(e,o){const t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function o(e){const o=document.createElement("div");o.classList.add("entry-content","coil-message-container");e={headerLogo:q,title:"This content is for Coil members only",content:e,button:{text:E,href:k}};return c(o).append(A(e)),o}function t(e){const o=document.createElement("div");o.classList.add("coil-banner-message-container");e={content:e,button:{text:E,href:k}};return c(o).append(H(e)),o}function n(e){return j(e)}function i(){const e=document.querySelector(_);e&&(e.style.display="block")}function s(){if(""!==M){const e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=M,e}}function a(){return jQuery("p.coil-post-excerpt").remove()}function r(){return document.body.classList.contains("coil-no-gating")}function d(){return document.body.classList.contains("coil-gate-all")}function l(){return document.body.classList.contains("coil-gate-tagged-blocks")}function m(){return".content-area .entry-content"===_}function u(){return!!document.body.classList.contains("coil-show-excerpt")}function p(){0<c("p.monetize-msg").length&&(c("p.monetize-msg").remove(),d()?u()&&s()?(document.body.classList.add("show-excerpt-message"),c(_).before(o(C)),c(_).prepend(s())):(document.body.classList.add("show-fw-message"),c(_).before(o(C))):l()?(c(".coil-show-monetize-users").prepend(n(C)),c(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),i(),T&&!b("ShowCoilPublicMsg")&&(c("body").append(t(L)),g("ShowCoilPublicMsg"))):(document.body.classList.add("show-fw-message"),document.querySelector(_).before(o(C))))}function g(e){c("#js-coil-banner-dismiss").on("click",function(){b(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),c(this).parent().parent().remove())})}function b(e){var o=Cookies.get(e);return void 0!==o&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===o}function f(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?c(_).before(e(P,"admin-message")):c("body").removeClass("coil-missing-id"),r()||m()||(i(),c(_+"*.coil-hide-monetize-users").css("display","none"),c(_+"*.coil-show-monetize-users").css("display","none")),c("body").trigger("coil-missing-id")):r()?T&&document.body.classList.contains("monetization-not-initialized")&&!b("ShowCoilPublicMsg")&&(c("body").append(t(L)),g("ShowCoilPublicMsg")):(!d()||u()?document.querySelector(_).before(e(S,"")):c("p.coil-post-excerpt").after(e(S,"")),setTimeout(function(){a(),I.html(S)},2e3),setTimeout(function(){p()},5e3))}function y(){(d()||l())&&(a(),function(){const e=document.querySelector(_);e&&(e.style.display="none")}(),document.querySelector(_).before(e(S,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(c("p.monetize-msg").text()===S?p():r()&&T&&!b("ShowCoilPublicMsg")&&(c("body").append(t(L)),g("ShowCoilPublicMsg")))},5e3)}function h(e){monetizationStartEventOccurred=!0,r()||m()||(i(),document.body.classList.remove("show-fw-message"),u()&&a()),c("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),I.remove(),u()||c("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),c("body").trigger("coil-monetization-initialized",[e]),0<c("p.monetize-msg").length&&(c("p.monetize-msg").remove(),a(),i())}function w(e){var o=e.detail.paymentPointer,t=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;c("body").trigger("coil-monetization-progress",[e,o,t,n,i,s])}function z(){if(document.body.classList.contains("monetization-not-initialized"))if(r()||m()||c(_).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":f();break;case"started":document.querySelector(_).before(e(S,""));break;case"stopped":y()}document.monetization.addEventListener("monetizationstart",h),document.monetization.addEventListener("monetizationprogress",w)}else window.Cypress&&window.Cypress.monetized||(c("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),d()?(c(_).before(o(v)),u()&&s()?(document.body.classList.add("show-excerpt-message"),c(_).prepend(s())):document.body.classList.add("show-fw-message")):l()?(c(".coil-show-monetize-users").prepend(n(x)),c(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),i(),T&&!b("ShowCoilPublicMsg")&&(c("body").append(t(L)),g("ShowCoilPublicMsg"))):r()&&T&&!b("ShowCoilPublicMsg")&&(c("body").append(t(L)),g("ShowCoilPublicMsg")),c("body").trigger("coil-extension-not-found"))}c(document).ready(function(){document.addEventListener("coilstart",z),z()})}}(jQuery);